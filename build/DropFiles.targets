<Project DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
  
  <Target Name="DropFiles" AfterTargets="Build" Condition="'@(DropUnsignedFile);@(DropSignedFile)' != ''">
    <PropertyGroup>
      <DropDir>$(DropRootDir)</DropDir>
      <DropDir Condition="'$(DropSubDir)'!=''">$(DropRootDir)\$(DropSubDir)</DropDir>
    </PropertyGroup>
    <MakeDir Condition="!Exists($(DropDir))" Directories="$(DropDir)" />
    <Copy DestinationFolder="$(DropDir)" SourceFiles="@(DropUnsignedFile);@(DropSignedFile)" />
    <ItemGroup>
      <FilesToSign Include="@(DropSignedFile->'$(DropDir)\%(Filename)%(Extension)')">
        <Authenticode>Microsoft</Authenticode>
        <StrongName>StrongName</StrongName>
      </FilesToSign>
    </ItemGroup>
  </Target>
  <ItemGroup>
    <SignFilesDependsOn Include="DropFiles" />
  </ItemGroup>
  
</Project>
